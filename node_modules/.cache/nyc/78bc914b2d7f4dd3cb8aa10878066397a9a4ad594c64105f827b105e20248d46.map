{"version":3,"file":"/Users/fastpagamentos/development/Testes/graphql-2/src/graphql/dataloaders/PostLoader.ts","sources":["/Users/fastpagamentos/development/Testes/graphql-2/src/graphql/dataloaders/PostLoader.ts"],"names":[],"mappings":";;AAIA,MAAa,UAAU;IAEnB,MAAM,CAAC,UAAU,CAAC,IAAe,EAAE,MAAiC,EAAE,eAA+B;QAEjG,IAAI,GAAG,GAAa,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;QAElD,OAAO,IAAI,CAAC,OAAO,CAAC;YAChB,KAAK,EAAE;gBACH,EAAE,EAAE;oBACA,GAAG,EAAE,GAAG;iBACX;aACJ;YACD,UAAU,EAAE,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC;SACjG,CAAC;aACG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAA;IACjE,CAAC;CACJ;AAhBD,gCAgBC","sourcesContent":["import { PostModel, PostInstance } from \"../../models/PostModel\";\nimport { DataLoaderParam } from \"../../interfaces/DataLoaderParamInterface\";\nimport { RequestedField } from \"../ast/RequestedField\";\n\nexport class PostLoader {\n\n    static batchPosts(Post: PostModel, params: DataLoaderParam<number>[], requestedFields: RequestedField) {\n\n        let ids: number[] = params.map(param => param.key)\n\n        return Post.findAll({\n            where: {\n                id: {\n                    $in: ids\n                }\n            },\n            attributes: requestedFields.getFields(params[0].info, { keep: ['id'], exclude: ['comments'] })\n        })\n            .then(rows => ids.map(id => rows.find(x => x.id === id)))\n    }\n}"]}